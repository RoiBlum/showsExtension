document.addEventListener("DOMContentLoaded",()=>{chrome.runtime.sendMessage({type:"get-manga-history"},o=>{const d=document.getElementById("manga-table-body");if(d.innerHTML="",!o||!o.success){d.innerHTML="<tr><td colspan='4'>Error loading history</td></tr>";return}for(const n of o.history){const e=document.createElement("tr"),a=document.createElement("td");a.textContent=n.title,e.appendChild(a);const r=document.createElement("td");r.textContent=n.chapter,e.appendChild(r);const c=document.createElement("td"),i=new Date(n.updatedAt);c.textContent=i.toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),e.appendChild(c);const l=document.createElement("td"),t=document.createElement("a");t.href=n.url||"#",t.textContent="Go",t.target="_blank",t.style.color="#007bff",t.style.textDecoration="none",l.appendChild(t),e.appendChild(l),d.appendChild(e)}})});
